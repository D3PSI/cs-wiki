# Flows and Cuts (TODO)

# Flows

<aside>
üí° A *network* is a tuple $N = (V,A,c,s,t)$, where the following hold:

1. $(V,A)$ is a directed graph,
2. $s\in V$ is the *source*,
3. $t \in V \setminus \{s\}$ is the *target* and,
4. $c : A \longrightarrow \mathbb{R}^+_0$ is the *capacity function*.
</aside>

<aside>
üí° Let $N = (V,A,c,s,t)$ be a network. A *flow* in $N$ is a function $f: A \longrightarrow \mathbb{R}$ with the conditions

1. $0 \leq f(e) \leq c(e)$ for all $e \in A$, the *admissibility*, and
2. for all $v \in V \setminus \{s,t\}$ it holds that 
    
    $$
    \sum_{u\in V: (u,v) \in A}f(u,v) = \sum_{u\in V: (v,u)\in A}f(v,u)
    $$
    
    which is called the *flow conservation*.
    

The *value* of a flow $f$ is defined by 

$$
\text{val}(f) = \text{netoutflow}(s) = \sum_{u \in V: (s,u)\in A}f(s,u) - \sum_{u \in V: (u,s)\in A}f(u,s).
$$

</aside>

<aside>
üìå *The net inflow of the target equals the value of the flow, i.e.,*

$$
\text{netinflow}(t)=\sum_{u\in V:(u,t) \in A}f(u,t) - \sum_{u \in V:(t,u) \in A}f(t,u) = \text{val}(f).
$$

</aside>

# Cuts

<aside>
üí° An $s$-$t$-*cut* for a network $(V,A,c,s,t)$ is a partition $(S,T)$ of $V$ (i.e., $S \cup T = V$ and $S \cap T = \varnothing$) with $s \in S$ and $t \in T$. The *capacity* of an $s$-$t$-cut $(S,T)$ is defined by

$$
\text{cap}(S,T) = \sum_{(u,w)\in(S \times T) \cap A} c(u,w).
$$

</aside>

<aside>
üìå *Let $f$ be a flow and $(S,T)$ be an $s$-$t$-cut in a network $(V,A,c,s,t)$. It then holds that*

$$
\text{val}(f) \leq \text{cap}(S,T).
$$

</aside>

<aside>
üìñ (Max-Flow-Min-Cut Theorem).

*Every network $N = (V,A,c,s,t)$ fulfills* 

$$
\max_{f \space \text{flow in $N$}} \text{val}(f) = \min_{(S,T) \space \text{$s$-$t$-cut in $N$}} \text{cap}(S,T).
$$

</aside>

# Augmenting paths

The fundamental concept behind many max-flow algorithms is to start with an arbitrary flow (e.g., $f$ constant $0$ is good for basically all cases) and improving it successively. A first approach to this could look as follows. Assume we find a directed path $P$ from source to target, where the flow has not used the full capacity of all the edge, i.e., $f(e) \lt c(e)$ for all $e$ in $P$. Now let $\delta = \min_{e \in P} c(e) - f(e)$. If we now increase the value of the flow by $\delta$ in all edges of $P$, we do not break flow conservation and the value of the flow has increased by $\delta$. Sadly, there do exist flows that can not be improved with this scheme even though they are not optimal. One can not only increase flow in an outgoing edge, but also decrease flow in another incoming edge to increase the resulting flow. In this sense we can entertain paths from source to target in which edges can be directed both forwards and backwards. Let us assume, that we can increase flow in every edge that is directed in forwards direction by $\delta$ without breaking admissibility, and that we can decrease the flow in every edge that is directed in backwards direction by $\delta$ without having negative flow. Then we can modify flow along such a path without breaking flow conservation. If we successively optimize flow with these so-called *augmenting paths* one can only get stuck in maximal flows. Interestingly, this ‚Äúalgorithm‚Äù only has finitely many steps when the capacities of a flow are rational.

# Residual Network

<aside>
üí° Let $N = (V,A,c,s,t)$ be a network without opposing edges and let $f$ be a flow in $N$. The *residual network* $N_f=(V,A_f,r_f,s,t)$ is defined as follows:

1. If $e \in A$ with $f(e) \lt c(e)$, then $e$ is also an edge in $A_f$ with $r_f(e) = c(e)-f(e)$.
2. If $e \in A$ with $f(e) \gt 0$, then $e^\text{opp}$ is in $A_f$ with $r_f(e^\text{opp}) = f(e).$
3. Only edges ad defined in points 1 and 2 are in $A_f$.

$r_f(e)$, $e \in A_f$, is called the *residual capacity* of edge $e$.

</aside>

<aside>
üìñ *A flow $f$ in a network $N$ is a maximal flow if and only if there does not exist a directed path from the source $s$ to the target $t$ in the residual network $N_f$. For every such maximum flow there does exist an $s$-$t$-cut $(S,T)$ with $\text{val}(f) = \text{cap}(S,T)$.*

</aside>